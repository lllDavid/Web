<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Klausur JavaScript</title>
	<style type="text/css">
		table,
		td,
		th {
			border: 1px solid black;
		}
	</style>
</head>

<body style="padding: 20px;">
	<h1>Klausur JavaScript</h1>
	<p>Achte auf eine saubere Verschachtelung des Codes und kommentiere ausreichend.</p>
	<img onmouseover="showStringLenghtForelle()" onmouseout="tabelleAnzeigen()" id="forelle" src="bachforelle.jpg"
		width="auto" height="300" style="margin-right: 20px;">
	<img onmouseover="showStringLenghtKarpfen()" onclick="addToArray()" id="karpfen" src="spiegelkarpfen.jpg"
		width="auto" height="300" style="margin-right: 20px;">
	<p><strong>Ausgabe Vor- und Nachname: </strong><span id="ausgabeName"></span></p>
	<p><strong>Ausgabe Forelle: </strong><span id="ausgabeForelle"></span></p>
	<p><strong>Ausgabe Karpfen: </strong><span id="ausgabeKarpfen"></span></p>
	<p><strong>Ausgabe Tabelle: </strong><span id="ausgabeTabelle"></span></p>
	
	<table id="tabelle">
		<thead>
			<tr id="tabelleHeader">
			</tr>
		</thead>
		<tbody id="tabelleBody">

		</tbody>
	</table>
	<br>
	<button onclick="showJSON()">Show JSON Data in Console</button>
	<script>
		/*
		Gib Deinen Vor- und Nachnamen in der entsprechenden Zeile hinter dem Doppelpunkt aus.
		*/
		document.getElementById('ausgabeName').textContent = "David Wagner"
		// Ansprechen der span ausgabeName über dom

		/*
		1. Definiere ein Objekt mit dem Namen "bachforelle",
		mit folgenden Eigenschaften inkl. String-Werten:
		Name: Bachforelle
		Art: Salmoniden
		Größe: 40cm
		Schonzeit: Winter
		Lebensraum: Bergbäche

		*/

		const bachforelle = {
			name: "Bachforelle",
			art: "Salmoniden",
			größe: "40cm",
			schonzeit: "Winter",
			lebensraum: "Bergbäche"
		}

		/*
		
		Definiere ein weiteres Objekt mit dem Namen "spiegelkarpfen"
		mit folgenden Eigenschaften inkl. String-Werten:
		Name: Spiegelkarpfen
		Art: Karpfenartige
		Größe: 60cm
		Schonzeit: Herbst
		Lebensraum: Seen
		*/
		// 10 Punkte
		// Schreibe den Code:

		const spiegelkarpfen = {
			name: "Spiegelkarpfen",
			art: "Karpfenartige",
			größe: "60cm",
			schonzeit: "Herbst",
			lebenraum: "Seen"
		}



		/*
		2. Gib die String-Länge vom Wert der Objekt-Eigenschaft "Art" aus.
		Das Ergebnis soll erscheinen, wenn man mit der Maus über 
		das Bild des gezeigten Fisches fährt. Jeweils einmal für Forelle und Karpfen.
		Das Ergebnis muss dabei in der selben Zeile hinter dem Doppelpunkt stehen, 
		wie z.B. der String "Ausgabe Forelle:" oder "Ausgabe Karpfen:".
		
		Folgende Reihenfolge:
		Zuerst soll stehen: "Das Wort "
		Danach soll der Wert der Eigenschaft "Art" ausgegeben werden
		Dann kommt " enthält"
		Dann kommt die String-Länge von "Art"
		Danach soll stehen: " Buchstaben" 
		
		Ergebnis: Das Wort Salmoniden enthält 10 Buchstaben. 
		Ergebnis: Das Wort Karpfenartige enthält 13 Buchstaben.
		*/
		// 20 Punkte
		// Schreibe den Code:

		function showStringLenghtForelle() {

			document.getElementById('ausgabeForelle').textContent = "Das Wort " + Object.values(bachforelle)[1] + " enthält " + Object.values(bachforelle)[1].length + " Buchstaben"

		}
		// Einfache Form über Object.values

		function showStringLenghtKarpfen() {

			document.getElementById('ausgabeKarpfen').textContent = "Das Wort " + Object.values(spiegelkarpfen)[1] + " enthält " + Object.values(spiegelkarpfen)[1].length + " Buchstaben"

		}
		// Einfache Form über Object.values





		/*
		3. Definiere ein Array "fische" welches als einzigen Wert das oben erstellte Objekt "bachforelle" enthält.
		*/
		// 5 Punkte
		// Schreibe den Code:


		const fische = [bachforelle]

		/* 5 Punkte
		4. Füge zum dem Array das Objekt "spiegelkarpfen"
		mittels Befehl nachträglich hinzu:
		*/
		// 5 Punkte
		// Schreibe den Code:

		fische.push(spiegelkarpfen)




		/*
		5. Erstelle mittels Schleifen und der forEach()-Methode,
		   eine HTML-Tabelle in welcher:

			a) Ein Tabellenkopf erzeugt wird, der die Namen der Objekt-Eigenschaften in normaler Rechtschreibung enthält.
							Jede Objekt-Eigenschaft steht dabei in einer eigene Tabellen-Zelle.
							Erstelle hierfür auch ein Objekt "tabellenKopf", 
							welches die passenden Namen für den Tabellen-Kopf enthält
			b) Die Eigenschafts-Werte der beiden Objekte im Array "fische"
			   jeweils in einzelne Tabellen-Zellen innerhalb einer Tabellen-Reihe darstellt werden
			c) Die Funktion so geschrieben ist, dass jederzeit
			   weitere Objekte im Array "fische" aufgenommen werden können
			   und trotzdem in der Tabelle erscheinen,
			   wenn das Event neu ausgeführt wird.
		Die Tabelle soll generiert werden, wenn man mit der Maus
		aus dem Bild Forelle herausfährt.
		Das Ergebnis soll nicht in der selben Zeile stehen wie der String "Ausgabe Tabelle:"
		*/
		// 30 Punkte
		// Schreibe den Code:

		const tabellenKopf = {
			name: "Name",
			art: "Art",
			größe: "Größe",
			schonzeit: "Schonzeit",
			lebenraum: "Lebensraum"

		}

		function tabelleAnzeigen() {

			let tabelleHead = document.querySelector('#tabelleHeader')
			let tabelleBody = document.querySelector('#tabelleBody')
			// Ansprechen der vorhandenen Tabellen Elemente(erstellen der Elemente mit createElement hat hier igendwie nicht funktioniert)

			Object.entries(tabellenKopf).forEach(([property, value]) => {
				let cell = document.createElement('th');
				cell.textContent = value;
				tabelleHead.appendChild(cell);
			});
			// Befüllen des TabellenHeaders durch forEach über die Entries von tabellenKopf Objekt

			fische.forEach(fisch => {
				let row = tabelleBody.insertRow();
				Object.values(fisch).forEach(value => {
					let cell = row.insertCell();
					cell.textContent = value;
				});
			});
			// For Each um Reihen für jeden Fisch zu erstellen und Object.values um Zellen zu erstellen und mit der value zu befüllen

		}



		/* 
		6. Bei Klick auf das Bild vom Spiegelkarpfen, soll dem Array "fische"
		   ein weiterer Fisch hinzugefügt werden:
		   Name: Seesaibling
		   Art: Salmoniden
		   Größe: 45cm
		   Schonzeit: Herbst
		   Lebensraum: Seen
	
		   Dieser Fisch sollte nun ebenfalls in der Tabelle auftauchen, 
		   wenn man das Event zum Erzeugen der Tabelle erneut ausführt.
		*/
		// 10 Punkte
		// Schreibe den Code:

		function addToArray() {
			const seesaibling = {
				name: "Seesaibling",
				art: "Salmoniden",
				größe: "45cm",
				schonzeit: "Herbst",
				lebenraum: "Seen"
			}

			fische.push(seesaibling)
			console.log(fische)

		}


		/* 
		7. Bei Klick auf das Bild von der Bachforelle, soll aus dem Array "fische"
		   samt enthaltener Objekte ein JSON-String erzeugt werden.
	
		   */
		function jsonString() {
			const json = JSON.stringify(fische)
			console.log(json)
		}

		// 20 Punkte
		// Extrapunkte gibt es, wenn der JSON-String in einer JSON-Datei gespeichert wird
		// Schreibe den Code:

		function showJSON() {
			const json = JSON.stringify(fische)
			localStorage.setItem("json", JSON.stringify(json));
			
			const data = localStorage.getItem("json");
			console.log("json: ", JSON.parse(json));
		}
		// JSON String wird in localStorage gespeichert(setItem) und anschließend durch getItem geladen

	</script>
</body>

</html>